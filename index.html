<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kick Channel Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --kick-green: #53fc18;
            --kick-dark: #0e0e10;
        }
        
        body {
            background-color: #121212;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            max-width: 1000px;
        }
        
        .app-header {
            background: linear-gradient(135deg, #232323 0%, #0e0e10 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
            border-bottom: 3px solid var(--kick-green);
        }
        
        .app-title {
            font-weight: 700;
            color: var(--kick-green);
            text-shadow: 0 0 10px rgba(83, 252, 24, 0.5);
        }
        
        .logo-icon {
            margin-right: 10px;
            vertical-align: middle;
        }
        
        .search-container {
            background: rgba(14, 14, 16, 0.7);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid #2a2a2a;
        }
        
        .search-input {
            background-color: #232323;
            border: 1px solid #333;
            color: #fff;
            border-radius: 6px;
            padding: 10px 15px;
        }
        
        .search-input:focus {
            background-color: #2a2a2a;
            border-color: var(--kick-green);
            box-shadow: 0 0 0 0.25rem rgba(83, 252, 24, 0.25);
            color: #fff;
        }
        
        .search-btn {
            background-color: var(--kick-green);
            border: none;
            color: #000;
            font-weight: 600;
            border-radius: 6px;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            background-color: #3ddc0c;
            box-shadow: 0 0 10px rgba(83, 252, 24, 0.5);
        }
        
        .profile-container {
            background: rgba(14, 14, 16, 0.7);
            border-radius: 12px;
            padding: 0;
            margin-top: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 1px solid #2a2a2a;
            transition: all 0.3s ease;
        }
        
        .profile-header {
            background: linear-gradient(135deg, #232323 0%, #0e0e10 100%);
            padding: 15px;
            border-bottom: 2px solid var(--kick-green);
        }
        
        .profile-info {
            padding: 25px;
        }
        
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--kick-green);
            box-shadow: 0 0 20px rgba(83, 252, 24, 0.4);
        }
        
        .profile-username {
            font-size: 2rem;
            font-weight: 700;
            color: var(--kick-green);
            margin-top: 15px;
            text-shadow: 0 0 10px rgba(83, 252, 24, 0.3);
        }
        
        .profile-bio {
            font-style: italic;
            color: #aaa;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .status-badge {
            font-size: 0.85rem;
            padding: 5px 10px;
            border-radius: 50px;
            font-weight: 600;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .status-online {
            background-color: var(--kick-green);
            color: #000;
        }
        
        .status-offline {
            background-color: #6c757d;
            color: #fff;
        }
        
        .stats-container {
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(20, 20, 22, 0.7);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            border: 1px solid #333;
        }
        
        .stat-item:hover {
            background: rgba(30, 30, 32, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .stat-icon {
            color: var(--kick-green);
            margin-right: 15px;
            font-size: 1.5rem;
            width: 30px;
            text-align: center;
        }
        
        .stat-value {
            font-weight: 600;
            color: #fff;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 0;
        }
        
        .social-links {
            margin-top: 30px;
        }
        
        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #232323;
            color: #fff;
            margin-right: 10px;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            border: 1px solid #333;
        }
        
        .social-link:hover {
            background-color: var(--kick-green);
            color: #000;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(83, 252, 24, 0.3);
        }
        
        .social-twitter:hover {
            background-color: #1DA1F2;
            border-color: #1DA1F2;
        }
        
        .social-youtube:hover {
            background-color: #FF0000;
            border-color: #FF0000;
        }
        
        .social-instagram:hover {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
            border-color: #C13584;
        }
        
        .social-tiktok:hover {
            background-color: #000000;
            border-color: #69C9D0;
        }
        
        .social-discord:hover {
            background-color: #5865F2;
            border-color: #5865F2;
        }
        
        .social-twitch:hover {
            background-color: #9146FF;
            border-color: #9146FF;
        }
        
        .social-facebook:hover {
            background-color: #1877F2;
            border-color: #1877F2;
        }
        
        .channel-link {
            display: block;
            padding: 15px;
            background-color: var(--kick-green);
            color: #000;
            text-align: center;
            font-weight: 600;
            border-radius: 8px;
            margin-top: 20px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .channel-link:hover {
            background-color: #3ddc0c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(83, 252, 24, 0.3);
            color: #000;
        }
        
        .footer {
            margin-top: 30px;
            padding: 20px 0;
            font-size: 0.9rem;
            color: #666;
            text-align: center;
            border-top: 1px solid #333;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loading-spinner {
            color: var(--kick-green);
            width: 3rem;
            height: 3rem;
        }
        
        .badge {
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .badge-success {
            background-color: var(--kick-green);
            color: #000;
        }
        
        .badge-primary {
            background-color: #007bff;
        }
        
        .badge-danger {
            background-color: #dc3545;
        }
        
        .badge-info {
            background-color: #17a2b8;
        }
        
        .error-message {
            color: #dc3545;
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .ascending-links {
            margin-top: 20px;
        }
        
        .ascending-link {
            display: block;
            padding: 10px 15px;
            background-color: #232323;
            color: #fff;
            border-radius: 6px;
            margin-bottom: 10px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid #333;
        }
        
        .ascending-link:hover {
            background-color: #2a2a2a;
            border-color: var(--kick-green);
            color: var(--kick-green);
        }
        
        .ascending-link-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .ascending-link-desc {
            font-size: 0.85rem;
            color: #aaa;
            margin-bottom: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="app-header text-center">
            <h1 class="app-title mb-0">
                <i class="fas fa-bolt logo-icon"></i>KickStats Viewer
            </h1>
            <p class="text-muted mt-2 mb-0">Track and analyze Kick.com channel statistics</p>
        </div>

        <!-- Search box -->
        <div class="search-container">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" id="channelInput" class="form-control search-input" placeholder="Enter Kick Username">
                        <button id="getProfileBtn" class="btn search-btn">
                            <i class="fas fa-search me-2"></i>Search
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading indicator -->
        <div id="loading" class="loading">
            <div class="spinner-border loading-spinner" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Fetching channel data...</p>
        </div>

        <!-- Profile Container -->
        <div id="profileContainer" class="profile-container" style="display: none;">
            <div class="profile-header">
                <h3 class="m-0"><i class="fas fa-user-circle me-2"></i>Channel Profile</h3>
            </div>
            <div class="profile-info">
                <div id="channelInfo">
                    <!-- Channel info will be populated here -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; StreamStats 2016-2025 | All data provided by Kick.com API</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
        // Global variables
        let bannedUsers = [];

        // DOM elements
        const channelInput = document.getElementById('channelInput');
        const getProfileBtn = document.getElementById('getProfileBtn');
        const channelInfo = document.getElementById('channelInfo');
        const profileContainer = document.getElementById('profileContainer');
        const loadingElement = document.getElementById('loading');

        // Event listeners
        document.addEventListener('DOMContentLoaded', init);
        getProfileBtn.addEventListener('click', handleSearchClick);
        channelInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleSearchClick();
            }
        });

        // Initialize
        async function init() {
            try {
                bannedUsers = await getBannedUsers();
                console.log(`Loaded ${bannedUsers.length} banned users`);
            } catch (error) {
                console.error('Error initializing:', error);
            }
        }

        // Handle search button click
        function handleSearchClick() {
            const channelName = channelInput.value.trim();
            if (channelName) {
                getChannelInfo(channelName);
            } else {
                showError('Please enter a Kick username');
            }
        }

        // Fetch banned users list
        async function getBannedUsers() {
            try {
                const response = await fetch('banned.json');
                const data = await response.json();
                return data.BannedUsers.map(user => user.toLowerCase()) || [];
            } catch (error) {
                console.error('Error fetching banned users:', error);
                return [];
            }
        }

        // Main function to get channel info
        async function getChannelInfo(channelName) {
            // Show loading and hide profile
            showLoading(true);
            profileContainer.style.display = 'none';

            try {
                // Check if user is banned
                if (bannedUsers.includes(channelName.toLowerCase())) {
                    showError(`User "${channelName}" is banned from being Searched on the site`);
                    return;
                }

                // Fetch channel data
                const response = await fetch(`https://kick.com/api/v1/channels/${channelName}`);
                if (!response.ok) {
                    throw new Error(`Channel "${channelName}" not found or API error`);
                }
                
                const data = await response.json();
                renderChannelProfile(data);
            } catch (error) {
                showError(error.message);
            } finally {
                showLoading(false);
            }
        }

        // Render the channel profile with all data
        function renderChannelProfile(data) {
            // Format dates
            const joinedDate = moment(data.user.email_verified_at).format('MMMM DD, YYYY');
            
            // Create HTML content
            let html = `
                <div class="row align-items-center">
                    <div class="col-md-4 text-center">
                        <img src="${data.user.profile_pic}" alt="${data.user.username}" class="profile-img">
                        <h2 class="profile-username">${data.user.username}</h2>
                        <div class="status-badge ${data.livestream ? 'status-online' : 'status-offline'}">
                            <i class="fas ${data.livestream ? 'fa-broadcast-tower' : 'fa-power-off'} me-1"></i>
                            ${data.livestream ? 'LIVE' : 'Offline'}
                        </div>
                    </div>
                    <div class="col-md-8">
                        <p class="profile-bio">${data.user.bio || 'No bio provided'}</p>
                        
                        <div class="stats-container">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="stat-item">
                                        <i class="fas fa-users stat-icon"></i>
                                        <div>
                                            <div class="stat-value">${data.followersCount.toLocaleString()}</div>
                                            <p class="stat-label">Followers</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="stat-item">
                                        <i class="fas ${data.subscription_enabled ? 'fa-star' : 'fa-star-half-alt'} stat-icon"></i>
                                        <div>
                                            <div class="stat-value">${data.subscription_enabled ? 'Yes' : 'No'}</div>
                                            <p class="stat-label">Partnered</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="stat-item">
                                        <i class="fas fa-calendar-alt stat-icon"></i>
                                        <div>
                                            <div class="stat-value">${joinedDate}</div>
                                            <p class="stat-label">Joined On</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="stat-item">
                                        <i class="fas fa-id-card stat-icon"></i>
                                        <div>
                                            <div class="stat-value">${data.user.id}</div>
                                            <p class="stat-label">User ID</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex flex-wrap mt-4">
                            <span class="badge bg-success me-2 mb-2">
                                <i class="fas fa-video me-1"></i> VODs: ${data.vod_enabled ? 'Enabled' : 'Disabled'}
                            </span>
                            <span class="badge bg-primary me-2 mb-2">
                                <i class="fas fa-broadcast-tower me-1"></i> Can Host: ${data.can_host ? 'Yes' : 'No'}
                            </span>
                            ${data.mature ? `
                            <span class="badge bg-danger me-2 mb-2">
                                <i class="fas fa-exclamation-circle me-1"></i> Mature Content
                            </span>` : ''}
                            ${data.is_affiliate ? `
                            <span class="badge bg-info me-2 mb-2">
                                <i class="fas fa-handshake me-1"></i> Affiliate
                            </span>` : ''}
                        </div>
                        
                        <a href="https://kick.com/${data.user.username}" target="_blank" class="channel-link">
                            <i class="fas fa-external-link-alt me-2"></i>Visit Channel
                        </a>
                    </div>
                </div>`;
                
            // Add social links if available
            html += `<div class="social-links text-center mt-4">`;
            
            if (data.user.twitter) {
                html += `<a href="https://x.com/${data.user.twitter}" target="_blank" class="social-link social-twitter" title="Twitter"><i class="fa-brands fa-x-twitter"></i></a>`;
            }
            
            if (data.user.youtube) {
                html += `<a href="https://youtube.com/${data.user.youtube}" target="_blank" class="social-link social-youtube" title="YouTube"><i class="fab fa-youtube"></i></a>`;
            }
            
            if (data.user.instagram) {
                html += `<a href="https://instagram.com/${data.user.instagram}" target="_blank" class="social-link social-instagram" title="Instagram"><i class="fab fa-instagram"></i></a>`;
            }
            
            if (data.user.tiktok) {
                html += `<a href="https://tiktok.com/@${data.user.tiktok}" target="_blank" class="social-link social-tiktok" title="TikTok"><i class="fab fa-tiktok"></i></a>`;
            }
            
            if (data.user.discord) {
                html += `<a href="https://discord.gg/${data.user.discord}" target="_blank" class="social-link social-discord" title="Discord"><i class="fab fa-discord"></i></a>`;
            }
            
            if (data.user.facebook) {
                html += `<a href="https://facebook.com/${data.user.facebook}" target="_blank" class="social-link social-facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>`;
            }
                        if (data.user.streamlabs) {
                html += `<a href="https://streamlabs.com/${data.user.streamlabs}/tip" target="_blank" class="social-link social-facebook" title="Facebook"><i class="fa-solid fa-dollar-sign"></i></a>`;
            }
            html += `</div>`;
            
            // Add ascending links section if available
            if (data.ascending_links && data.ascending_links.length > 0) {
                html += `
                    <div class="ascending-links mt-4">
                        <h4><i class="fas fa-link me-2"></i>Channel Links</h4>
                        <div class="row">`;
                
                data.ascending_links.forEach(link => {
                    html += `
                        <div class="col-md-6 mb-3">
                            <a href="${link.link}" class="ascending-link" target="_blank">
                                <div class="ascending-link-title">${getLinkIcon(link.link)} ${link.title || getDefaultLinkTitle(link.link)}</div>
                                <div class="ascending-link-desc">${link.description}</div>
                            </a>
                        </div>`;
                });
                
                html += `</div></div>`;
            }

            // Update the DOM
            channelInfo.innerHTML = html;
            profileContainer.style.display = 'block';
        }

        // Helper function to get an icon based on link URL
        function getLinkIcon(url) {
            if (url.includes('twitter.com') || url.includes('x.com')) {
                return '<i class="fa-brands fa-x-twitter"></i>';
            } else if (url.includes('youtube.com')) {
                return '<i class="fab fa-youtube"></i>';
            } else if (url.includes('instagram.com')) {
                return '<i class="fab fa-instagram"></i>';
            } else if (url.includes('tiktok.com')) {
                return '<i class="fab fa-tiktok"></i>';
            } else if (url.includes('discord.gg')) {
                return '<i class="fab fa-discord"></i>';
            } else if (url.includes('facebook.com')) {
                return '<i class="fab fa-facebook-f"></i>';
            } else if (url.includes('twitch.tv')) {
                return '<i class="fab fa-twitch"></i>';
            } else {
                return '<i class="fas fa-link"></i>';
            }
        }

        // Helper function to get default title for links
        function getDefaultLinkTitle(url) {
            if (url.includes('twitter.com') || url.includes('x.com')) {
                return 'Twitter';
            } else if (url.includes('youtube.com')) {
                return 'YouTube';
            } else if (url.includes('instagram.com')) {
                return 'Instagram';
            } else if (url.includes('tiktok.com')) {
                return 'TikTok';
            } else if (url.includes('discord.gg')) {
                return 'Discord';
            } else if (url.includes('facebook.com')) {
                return 'Facebook';
            } else if (url.includes('twitch.tv')) {
                return 'Twitch';
            } else {
                return 'Link';
            }
        }

        // Show loading state
        function showLoading(isLoading) {
            loadingElement.style.display = isLoading ? 'block' : 'none';
        }

        // Show error message
        function showError(message) {
            profileContainer.style.display = 'block';
            channelInfo.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    ${message}
                </div>
            `;
            showLoading(false);
        }

        // Refresh banned users list every 3 minutes
        setInterval(async () => {
            bannedUsers = await getBannedUsers();
        }, 3 * 60 * 1000);
    </script>
</body>

</html>
